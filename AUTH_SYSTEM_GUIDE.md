# AmuseFit 인증 시스템 가이드

## 현재 구현된 인증 방법

### 1. 로컬 계정 로그인
- **사용자명/비밀번호** 기반 인증
- 유연한 사용자명 매칭 (이메일, 닉네임, 전화번호)
- 세션 기반 상태 관리

### 2. 카카오 OAuth 로그인
- Kakao REST API 사용
- 자동 사용자 생성/업데이트
- 필수 정보 누락 시 추가 회원가입 단계

## ID/비밀번호 찾기 시스템

### ID 찾기 기능
**구현 상태**: ✅ 완료
**인증 방법**: 전화번호 확인

#### 프로세스:
1. 사용자가 전화번호 입력 (010-1234-5678 형식)
2. 데이터베이스에서 전화번호로 사용자 검색
3. 일치하는 사용자가 있으면 사용자명(username) 반환
4. **실제 서비스에서는 SMS 발송 필요**

#### API 엔드포인트:
```
POST /api/auth/find-id
Body: { "phone": "01012345678" }
Response: { "message": "아이디를 찾았습니다.", "userId": "username" }
```

### 비밀번호 찾기 기능
**구현 상태**: 🔶 부분 완료 (토큰 생성만)
**인증 방법**: 이메일 또는 전화번호 확인

#### 현재 구현된 프로세스:
1. 사용자가 이메일 또는 전화번호 입력
2. 데이터베이스에서 해당 연락처로 사용자 검색
3. 사용자가 존재하면 32자리 랜덤 토큰 생성
4. 토큰을 데이터베이스에 저장 (24시간 유효)
5. **실제 서비스에서는 이메일/SMS 발송 필요**

#### API 엔드포인트:
```
POST /api/auth/forgot-password
Body: { "email": "user@example.com" } 또는 { "phone": "01012345678" }
Response: { "message": "비밀번호 재설정 링크를 전송했습니다." }
```

#### 비밀번호 재설정:
```
GET /api/auth/verify-reset-token/:token
POST /api/auth/reset-password
Body: { "token": "...", "newPassword": "..." }
```

## 실제 서비스 구현을 위한 추가 필요사항

### 1. SMS 발송 시스템
- **용도**: ID 찾기, 비밀번호 재설정
- **추천 서비스**: 
  - Twilio (국제)
  - NHN Cloud SMS (한국)
  - 알리고 (한국)

### 2. 이메일 발송 시스템  
- **용도**: 비밀번호 재설정
- **추천 서비스**:
  - SendGrid
  - Amazon SES
  - Mailgun

### 3. 인증 번호 확인 시스템
- 6자리 숫자 코드 생성
- 5분 유효시간 설정
- 3회 시도 제한

## 보안 고려사항

### 현재 적용된 보안 조치:
1. **토큰 기반 재설정**: 32바이트 랜덤 토큰
2. **시간 제한**: 24시간 후 토큰 만료
3. **일회성 사용**: 토큰 사용 후 무효화
4. **정보 보호**: 사용자 존재 여부 숨김 (보안상 항상 성공 메시지)

### 추가 보안 강화 방안:
1. **속도 제한**: IP별 요청 횟수 제한
2. **계정 잠금**: 연속 실패 시 일시적 잠금
3. **로그 기록**: 모든 인증 시도 기록
4. **2단계 인증**: SMS/이메일 인증 번호 확인

## 현재 개발/테스트 환경

### ID 찾기 테스트:
- 데모 사용자: phone = "01012345678"
- 실제 SMS 발송 없이 콘솔에 결과 출력

### 비밀번호 재설정 테스트:
- 재설정 링크가 콘솔에 출력됨
- 실제 이메일/SMS 발송 없음
- 토큰: http://localhost:5000/reset-password/{token}

## 프론트엔드 구현 현황

### 완료된 페이지:
- ✅ `/find-id` - ID 찾기 페이지
- ✅ `/forgot-password` - 비밀번호 찾기 페이지  
- ✅ `/reset-password/:token` - 비밀번호 재설정 페이지

### UI/UX 특징:
- 모바일 최적화 디자인
- 실시간 유효성 검사
- 단계별 안내 메시지
- 에러 처리 및 사용자 피드백

## 다음 단계 개선 사항

1. **SMS/이메일 발송 구현**
2. **인증 번호 확인 시스템**
3. **보안 강화 (속도 제한, 로깅)**
4. **관리자 도구 (사용자 관리, 로그 확인)**